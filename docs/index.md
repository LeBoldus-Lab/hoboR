---
layout: default
title: MAIN
---

# Welcome to `hoboR`: An R package for the analysis of HOBO weather data 
 
`HoboR` is a package for the analysis of weather station data. Analyzing weather station data can quickly become a big data project, making the task of processing and analysing data a significant challenge. To facilitate analysis and manipulation of weather station data, we developed `HoboR`. `HoboR` aims to simplify this process, making it less time-consuming for researchers and users of weather data. `HoboR` offers a series of tools to load multiple CSV files, remove duplicates, process and summarize data.

`HoboR` is a specialized R package designed to streamline the processing of large datasets from HOBO weather stations and data loggers. With `HoboR`, handling .csv files generated by a variety of [HOBO](https://www.onsetcomp.com) models or other weather station data becomes effortless. This package analyzes any microclimate measurements such as temperature, relative humidity (RH), dew point, and radiation. Additionally, `HoboR` is versatile in accepting data in multiple date formats, including *Day/Month/Year* (DD/MM/YYYY), *Month/Day/Year* (MM/DD/YYYY), and two digits *Year/Month/Day* (YY/MM/DD), ensuring flexibility across global time formats.

## HoboR Components and Other Examples

### [HOBOR components]({{ site.baseurl }}{% post_url 2024-04-05-hobor-documentation %}) 

### [HOBOR Callibration]({{ site.baseurl }}{% post_url 2024-04-05-hobor-calibration %}) 

### [An example to implement weather data]({{ site.baseurl }}{% post_url 2024-04-05-sampling-trends %})

### Manuscript--> HOBOR: An R package for the analysis of HOB weather data

# **Install hoboR**

`hoboR` installation via `devtools`, and in the process of submit it to CRAN. 

First, install `devtools` and dependency libraries
```R
install.packages("devtools")
library("devtools")
 devtools::install_github("LeBoldus-Lab/hoboR", force = TRUE)
library(hoboR)
```
_Required dependencies_

```R
library(lubridate)
library(tidyr)
library(dplyr)
library(reshape2)
library(ggplot2)
library(scales)
```

## **How to use hoboR**

### **For readers**
HoboR is an R package that process CSV files from HOBO weather stations and data loggers. The best way to start your project with `hoboR`, is to organize the downloaded CSV files from HOBO to a single directory. Using the `hobobinder()` function, it will bind all the CSV files in a large dataframe. For example, if you have 10 locations, you should have 10 folders, and each folder contains all the CSV. This group of weather records normallt include duplicates entries that `hobocleaner()` can deal and sort duplicates out. Most duplicates are generated by replacing batteries or retrieving data, etc. This clean dataframe can be summarized by time and the sensors of the model device, like temperture, relative humidity andprecipitation, men and standard deviation or mins and max records by implementing `meanhobo()`. 

The HOBO sensors might fail due to environmental issues and other issues. To identify such mail functionality, a series of functions to `identify impossiblevalues()` and `sensorfailures()` are available. Additional functionality for subsetting by time intervals using `hoborange()`, and snapshots of time intervals using `timestamp()`. A calibration guide for HOBO data loggers for microclimate experiments can be accessed and evaluated with `calibrator()` and `correction()` functions to adjust the HOBO devices at a baseline for all the HOBO loggers, crucial for microclimate studies. A couple of customized functions are also available, an example of the analysis of a buck bait experiment to investigate the incidence of sudden oak death (SOD) disease and environmental changes in Southern Oregon.

### **For coders**

```R
# load the library
library(hoboR)
```

## **Example:**
Suppose you have multiple CSV files in a directory called site A. 

```R
# Specify your site location name 
site = "A"
# Add the PATH to your sites for weather data (from hobo)
path = paste0("path/your/site_", site)
# make sure the path to your CSV files exists
file.exists(path)        # this will return a logical value TRUE
```

All the CSV from site A will be merged with `hobinder()`, note that some HOBO files format are different. Some HOBO write the headers in column 1, and other in column 2. Inspect the file, and choose how many rows you need to skip to read the header.
```R
# loading all hobo files
hobofiles <- hobinder(path, skip = 1)
```
After merging all records are present, including duplicate entriee. The `hobocleaner()` function clean duplicate entries, and rename columns. The format argument should match the HOBO format type: "ymd" for YYYY/MM/DD, "myd" for MM/YYYY/DD", and "yymd" corresponds to two digits year YY/MM/DD. Be mindful with your format selection, otherwise proceed with caution.
```R
# cleaning hobo files, add format
hobocleaned <- hobocleaner(hobofiles, format = "ymd")
head(hobocleaned)
```
The clean data can be aggregated by time interval, e.g. `"5 mins"`, `"12 h"`, `"1 day"`, etc., the `hobotime()` function or obtaining the mean, the minimum and maximum, and other summary statistcs by implementing `meanhobo()`.

```R
# getting hobo mean summary by time
hobot <- hobotime(hobocleaned, summariseby = "5 mins", na.rm = T)
head(hobot)

# getting hobo means by date
hobomeans <- meanhobo(hobocleaned, summariseby = "1 day",  na.rm = T)
head(hobomeans)
```

### **Additional Features**

```
# Specify a window range 
hoborange(hobocleaned, start="2022-06-04", end="2022-10-22")

# Snapshot of a time interval 
timestamp(hobocleaned, stamp = "2022-08-05 00:01", by = "24 hours",
          days = 100, na.rm = TRUE, plot = T, var = "Temp")

# Obtain the maximum and minimum values
impossiblevalues(hobocleaned, showrows = 3)

# Identify sensor failures
NA_data <- sensorfailures(hobocleaned, condition = ">", threshold = c(50, 3000, 101), opt = c("Temp", "Rain", "Wetness"))
```


### **Plot Weather Graphics **  

A guide to visualize weather data with `ggplot2`, whether you are visualizing one or two variables. By providing the code, you can customize the plot, color, and formatting of your data. 

```R
library(ggplot2)
library(scales)

# Plot one variable: temperateure
ggplot(hobocleaned, aes(x=as.POSIXct(Date), y = Temp)) +
  geom_line(alpha= 0.5) +
  scale_y_continuous( name = "Temperature °C")+
  ggtitle("Temperature: Oct 14 - Nov 11, 2021")+
  theme(axis.text.x = element_text(angle = 45, hjust = 1)) +
  scale_x_datetime(labels = date_format("%Y-%m-%d"))+
  theme_bw()
```

<img src="images/hobo_one_var.png" alt="weather 1var" style="width: 600px;"/> 

Fig. 1) Visualization of the summary statistics of temperature in Southern Oregon from October 2021 to January 2022.

```R
# two vars
ggplot(hobocleaned, aes(x=as.POSIXct(Date))) +
  geom_line( aes(y=Temp, col = "red"), alpha = 0.5) + 
  geom_line( aes(y= Wetness, col = "blue"), alpha = 0.5) + 
  scale_y_continuous(
    # Features of the first axis
    name = "Temperature °C",
    # Add a second axis and specify its features
    sec.axis = sec_axis(~., name="Humidity")
  ) +
  labs(title = "Temperature: Oct 14 - Nov 11, 2021", color = "Legend") +
  scale_color_manual(labels = c("Humidity", "Temp"), values = c("blue", "red")) +
  scale_x_datetime(labels = date_format("%Y-%m-%d"))+
  theme_bw()
```

<img src="images/hobo_two_vars.png" alt="weather 2var" style="width: 600px;"/> 

Fig. 2) Visualization of the summary statistics of two weather variables (temperature and humidity) in Southern Oregon from October 2021 to January 2022.


There is a function to analyze the correlation between the weather variables
```R
# horrelation
horrelation(hobocleaned, summariseby = "month", by = "mean", na.rm = F)
```

<img src="images/hobo_heatmap.png" alt="weather correlation" style="width: 400px;"/> 

Fig. 3) Visualization of the correaltion betwen weather variables. 

<p>Funded by:</p>
<img src="images/osu-logo.png" alt="OSU Logo" style="width: 200px;"/>
<img src="images/USDA-logo.png" alt="USDA Logo" style="width: 100px;"/>
